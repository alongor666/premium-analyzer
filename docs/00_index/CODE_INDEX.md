# ä»£ç ç´¢å¼• (CODE_INDEX.md)

> **ä»£ç æ¶æ„å¯¼èˆª** - æœ¬é¡¹ç›®ä»£ç ç»„ç»‡çš„ç»Ÿä¸€å…¥å£

æœ€åæ›´æ–°: 2026-01-04

---

## ğŸ—ï¸ æ ¸å¿ƒå±‚æ¶æ„

### 1. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚ (`/js/core/`)

**èŒè´£**: äº‹ä»¶é©±åŠ¨æ¶æ„å’ŒçŠ¶æ€ç®¡ç†

**å…³é”®æ–‡ä»¶**:
- [event-bus.js](../../js/core/event-bus.js) - Pub-Subäº‹ä»¶æ€»çº¿
  - å…¨å±€ç»„ä»¶é€šä¿¡æœºåˆ¶
  - äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼
- [state-manager.js](../../js/core/state-manager.js) - çŠ¶æ€ç®¡ç†å™¨
  - draft â†’ applied çŠ¶æ€æ¨¡å¼
  - ç­›é€‰å™¨çŠ¶æ€ç®¡ç†
- [worker-bridge.js](../../js/core/worker-bridge.js) - Web Workeré€šä¿¡æ¡¥
  - ä¸€æ¬¡æ€§ç›‘å¬å™¨æ¨¡å¼
  - é˜²æ­¢å†…å­˜æ³„æ¼

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘(å·²é€šè¿‡å®‰å…¨å®¡è®¡)
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°äº‹ä»¶ç±»å‹ã€æ‰©å±•çŠ¶æ€å­—æ®µ

---

### 2. UIç»„ä»¶å±‚ (`/js/components/`)

**èŒè´£**: å¯å¤ç”¨UIç»„ä»¶

**å…³é”®æ–‡ä»¶**:
- [file-uploader.js](../../js/components/file-uploader.js) - æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
  - æ‹–æ‹½ä¸Šä¼ 
  - Excel/CSVè§£æ(PapaParse + SheetJS)
- [dimension-selector.js](../../js/components/dimension-selector.js) - ç»´åº¦é€‰æ‹©å™¨
  - ç”µå•†å¼ä¸‹æ‹‰ç­›é€‰
  - draft â†’ applied æ¨¡å¼
- [metric-card.js](../../js/components/metric-card.js) - æŒ‡æ ‡å¡ç‰‡
  - KPIæŒ‡æ ‡æ˜¾ç¤º
  - åŠ¨æ€æ•°å€¼æ›´æ–°

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: ç»„ä»¶æ ¸å¿ƒé€»è¾‘
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°ç»„ä»¶ã€è°ƒæ•´æ ·å¼

---

### 3. å¤–éƒ¨æœåŠ¡å±‚ (`/js/services/`)

**èŒè´£**: ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ

**å…³é”®æ–‡ä»¶**:
- [chart-service.js](../../js/services/chart-service.js) - EChartså›¾è¡¨æœåŠ¡
  - å›¾è¡¨æ¸²æŸ“å°è£…
  - åŒYè½´å›¾è¡¨æ”¯æŒ
  - å“åº”å¼é€‚é…

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: å›¾è¡¨æ ¸å¿ƒé€»è¾‘
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°å›¾è¡¨ç±»å‹

---

### 4. å·¥å…·å‡½æ•°å±‚ (`/js/utils/`)

**èŒè´£**: çº¯å‡½æ•°å·¥å…·é›†

**å…³é”®æ–‡ä»¶**:
- [formatters.js](../../js/utils/formatters.js) - æ•°å€¼æ ¼å¼åŒ–
  - ä¿è´¹æ ¼å¼åŒ–
  - å æ¯”æ ¼å¼åŒ–(1ä½å°æ•°)
  - æ—¥æœŸæ ¼å¼åŒ–
- [validators.js](../../js/utils/validators.js) - æ•°æ®éªŒè¯
  - CSVç»“æ„éªŒè¯
  - æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
- [storage.js](../../js/utils/storage.js) - localStorageå°è£…
  - çŠ¶æ€æŒä¹…åŒ–
  - æ•°æ®å¯¼å‡º/å¯¼å…¥
- [exporter.js](../../js/utils/exporter.js) - CSV/Excelå¯¼å‡º
  - å¯¼å‡ºåŠŸèƒ½å®ç°
- [error-handler.js](../../js/utils/error-handler.js) - å…¨å±€é”™è¯¯å¤„ç†
  - ç»Ÿä¸€é”™è¯¯æ•è·
  - ç”¨æˆ·å‹å¥½æç¤º
- [logger.js](../../js/utils/logger.js) - ç»“æ„åŒ–æ—¥å¿—
  - è°ƒè¯•æ—¥å¿—
  - æ€§èƒ½ç›‘æ§
- [data-processor.js](../../js/utils/data-processor.js) - æ•°æ®å¤„ç†å·¥å…·
  - å æ¯”è®¡ç®—
  - å¢é•¿ç‡è®¡ç®—
- [date-sorter.js](../../js/utils/date-sorter.js) - æ—¶é—´æ’åºå·¥å…·
  - æœˆä»½è‡ªç„¶æ’åº
  - å­£åº¦/å¹´ä»½æ’åº

**çº¦æŸæ¡ä»¶**:
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°å·¥å…·å‡½æ•°ã€ä¼˜åŒ–ç°æœ‰å‡½æ•°
- âš ï¸ **æ³¨æ„**: ä¿æŒçº¯å‡½æ•°ç‰¹æ€§,æ— å‰¯ä½œç”¨

---

### 5. Web Workerå±‚ (`/js/workers/`)

**èŒè´£**: æ•°æ®å¤„ç†å¼•æ“

**å…³é”®æ–‡ä»¶**:
- [data.worker.js](../../js/workers/data.worker.js) - æ•°æ®å¤„ç†Worker
  - CSV/Excelè§£æ
  - å¤šç»´åº¦ç­›é€‰
  - æŒ‡æ ‡èšåˆè®¡ç®—
  - 600+ è¡Œæ ¸å¿ƒé€»è¾‘

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: æ ¸å¿ƒæ•°æ®å¤„ç†é€»è¾‘
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°çš„è®¡ç®—å‡½æ•°

---

### 6. é…ç½®é©±åŠ¨å±‚ (`/config/`)

**èŒè´£**: JSONé©±åŠ¨é…ç½®

**å…³é”®æ–‡ä»¶**:
- [dimensions.json](../../config/dimensions.json) - 9ä¸ªç»´åº¦å®šä¹‰
  - ç»´åº¦é…ç½®
  - CSVå­—æ®µæ˜ å°„
  - é¢œè‰²é…ç½®
- [app-config.json](../../config/app-config.json) - åº”ç”¨é…ç½®
  - æ€§èƒ½é…ç½®
  - UIé…ç½®
  - å¯¼å‡ºé…ç½®

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: `dimensions.json` ä¸­çš„ç»´åº¦å®šä¹‰(éœ€ä¸šåŠ¡éƒ¨é—¨æ‰¹å‡†)
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ CSVå­—æ®µåˆ«å

---

### 7. æ ·å¼ç³»ç»Ÿ (`/css/`)

**èŒè´£**: McKinseyé£æ ¼ä¸»é¢˜

**å…³é”®æ–‡ä»¶**:
- [themes.css](../../css/themes.css) - é¢œè‰²ç³»ç»Ÿ
  - å“ç‰Œçº¢è‰² `#a02724`
  - ç»´åº¦é…è‰²æ–¹æ¡ˆ
- [main.css](../../css/main.css) - å¸ƒå±€å’Œæ’ç‰ˆ
- [components.css](../../css/components.css) - ç»„ä»¶æ ·å¼

**çº¦æŸæ¡ä»¶**:
- ğŸš« **ç¦æ­¢ä¿®æ”¹**: æ ¸å¿ƒæ ·å¼ç³»ç»Ÿ
- âœ… **å…è®¸æ“ä½œ**: æ·»åŠ æ–°ç»„ä»¶æ ·å¼

---

## ğŸ”— å…³é”®æ–‡ä»¶

### åº”ç”¨å…¥å£
- [index.html](../../index.html) - SPAä¸»å…¥å£
- [js/app.js](../../js/app.js) - åº”ç”¨ä¸»é€»è¾‘(27000+ å­—ç¬¦)

### é…ç½®æ–‡ä»¶
- [package.json](../../package.json) - ä¾èµ–ç®¡ç†
- [vite.config.ts](../../vite.config.ts) - Viteæ„å»ºé…ç½®
- [tsconfig.json](../../tsconfig.json) - TypeScripté…ç½®

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

| ç›®å½• | æ–‡ä»¶æ•° | ä¼°è®¡è¡Œæ•° | çŠ¶æ€ |
|------|--------|----------|------|
| /js/core | 3 | ~800 | âœ… ç¨³å®š |
| /js/components | 3 | ~1200 | âœ… ç¨³å®š |
| /js/services | 1 | ~600 | âœ… ç¨³å®š |
| /js/utils | 9 | ~1500 | âœ… å¯æ‰©å±• |
| /js/workers | 1 | ~600 | ğŸš« ç¦æ­¢ä¿®æ”¹ |
| /config | 2 | ~200 | âš ï¸ éœ€å®¡æ‰¹ |
| /css | 3 | ~800 | ğŸš« ç¦æ­¢ä¿®æ”¹ |

---

## ğŸ” å¿«é€Ÿå¯¼èˆª

### æŒ‰ä»»åŠ¡æŸ¥æ‰¾

**æ·»åŠ æ–°åŠŸèƒ½**:
1. æ£€æŸ¥ `/config/dimensions.json` (æ˜¯å¦å¯é€šè¿‡é…ç½®å®ç°)
2. å¦‚éœ€ä»£ç : `/js/components/` (UIç»„ä»¶) æˆ– `/js/utils/` (å·¥å…·å‡½æ•°)
3. æ›´æ–° `/js/app.js` (é›†æˆæ–°ç»„ä»¶)

**è°ƒè¯•é—®é¢˜**:
1. æŸ¥çœ‹ `/js/utils/logger.js` (æ—¥å¿—è¾“å‡º)
2. æ£€æŸ¥ `/js/utils/error-handler.js` (é”™è¯¯å¤„ç†)
3. å‚è€ƒ `/docs/TROUBLESHOOTING.md` (æ•…éšœæ’é™¤)

**æ€§èƒ½ä¼˜åŒ–**:
1. æŸ¥çœ‹ `/js/workers/data.worker.js` (Workerå¤„ç†)
2. æ£€æŸ¥ `/js/core/worker-bridge.js` (é€šä¿¡ä¼˜åŒ–)
3. å‚è€ƒ `/config/app-config.json` (æ€§èƒ½é…ç½®)

**æ ·å¼è°ƒæ•´**:
1. æ£€æŸ¥ `/css/themes.css` (é¢œè‰²)
2. æ£€æŸ¥ `/css/components.css` (ç»„ä»¶æ ·å¼)
3. ğŸš« ä¸è¦ä¿®æ”¹ McKinsey ä¸»é¢˜è‰² `#a02724`

---

## ğŸ¯ æ¶æ„åŸåˆ™

### è®¾è®¡æ¨¡å¼
- **Pub-Sub**: EventBuså®ç°ç»„ä»¶è§£è€¦
- **Worker Bridge**: ä¸€æ¬¡æ€§ç›‘å¬å™¨é˜²æ­¢å†…å­˜æ³„æ¼
- **State Management**: Draft â†’ Applied çŠ¶æ€æ¨¡å¼
- **Configuration-Driven**: JSONé…ç½®é©±åŠ¨UIæ¸²æŸ“

### ä»£ç è´¨é‡
- **çº¯å‡½æ•°**: utilså±‚æ‰€æœ‰å‡½æ•°æ— å‰¯ä½œç”¨
- **äº‹ä»¶é©±åŠ¨**: ç»„ä»¶é€šè¿‡EventBusé€šä¿¡
- **æ¸è¿›å¢å¼º**: æ ¸å¿ƒåŠŸèƒ½ä¸ä¾èµ–localStorage
- **æ€§èƒ½ä¼˜å…ˆ**: å¤§æ•°æ®å¤„ç†åœ¨Workerä¸­è¿›è¡Œ

---

## ğŸ”— ç›¸å…³ç´¢å¼•

- ğŸ“– [æ–‡æ¡£ç´¢å¼•](./DOC_INDEX.md) - æ‰€æœ‰æ–‡æ¡£
- ğŸ“Š [è¿›å±•ç´¢å¼•](./PROGRESS_INDEX.md) - é¡¹ç›®è¿›å±•
- ğŸ¯ [CLAUDE.md](../../CLAUDE.md) - æ¶æ„è¯¦ç»†è¯´æ˜

---

*ç»´æŠ¤è€…: å¼€å‘å›¢é˜Ÿ*
*æ›´æ–°é¢‘ç‡: æ¯æ¬¡æ·»åŠ æ–°æ–‡ä»¶/ç›®å½•æ—¶*
